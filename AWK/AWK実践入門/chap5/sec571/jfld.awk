##--------------------------------------------------------------------
##
##--------------------------------------------------------------------

{
    ##----  全体の行数と列数
    LINE = NR
    if  ( COL < NF )  COL = NF
    ##----  フィールドの格納
    for  ( j = 1; j <= COL; j++ )  {
        FLD[LINE, j] = $j
        len = str_width($j)
        if  ( WID[j] < len )  WID[j] = len
    }
}

##--------------------------------------------------------------------
##
##--------------------------------------------------------------------

##====
function str_width(str,   len, ch, k) {
    len = length(str);
    wid = len;
    for ( k = 1; k <= len; k++ ) {
        ch = substr(str, k, 1);
        if ( ch !~ /[\x20-\x7d]/ )  wid++
    }
    return wid
}
